---
title: IRateEngine
description: Interface for dynamic pricing logic and risk models.
---

<Callout type="info">
  View deployed contract addresses in the [Contract Addresses](/resources/contract-addresses) section.
</Callout>

The **IRateEngine** calculates the premium rates for coverage. It uses a dynamic model based on utilization, loss history, and pool-specific configuration parameters.

## Interface

```solidity
// SPDX-License-Identifier: BUSL-1.1
pragma solidity ^0.8.20;

interface IRateEngine {
    struct PoolConfig {
        uint64 halfLife;          // seconds for reference EWMA half-life
        uint64 lossHalfLife;      // seconds for loss ratio EWMA half-life
        uint32 m1Bps;             // Utilisation multiplier (in BPS)
        uint32 m2Bps;             // Base rate multiplier (in BPS)
        uint32 slope1Bps;         // Pre-kink slope (in BPS)
        uint32 slope2Bps;         // Post-kink slope (in BPS)
        uint32 alphaBps;          // Loss multiplier sensitivity (in BPS)
        uint32 lossTargetBps;     // Target loss ratio (in BPS)
        uint32 capMoveBps;        // Max % move per update (in BPS)
        uint32 minRateBps;        // Absolute min rate clamp
        uint32 maxRateBps;        // Absolute max rate clamp
        uint32 minUOptBps;        // Min utilisation kink clamp
        uint32 maxUOptBps;        // Max utilisation kink clamp
        uint32 fallbackRateBps;   // Base rate when no reference trades
        uint32 fallbackUOptBps;   // Utilisation target fallback
    }

    function setPolicyManager(address manager) external;
    function setPayoutManager(address manager) external;
    function setPoolConfig(uint256 poolId, PoolConfig calldata cfg) external;
    function isPoolConfigured(uint256 poolId) external view returns (bool);

    function recordIntentTrade(uint256 poolId, uint256 rateBps, uint256 coverageAmount) external;
    function recordPremium(uint256 poolId, uint256 amount) external;
    function recordClaim(uint256 poolId, uint256 amount) external;

    function computeRate(uint256 poolId, uint256 sold, uint256 availableCapital) external returns (uint256);
    function previewRate(uint256 poolId, uint256 sold, uint256 availableCapital) external view returns (uint256);
}
```